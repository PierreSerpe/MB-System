.TH mbsystem 1 "22 January 2024" "MB-System 5.8" "MB-System 5.8"
.SH NAME
\fBmbsystem\fP \- A set of utilities for the processing and display of seafloor mapping data, 
particularly bathymetry, amplitude, and sidescan data from multibeam, sidescan, and interferometric sonars.

.SH VERSION
Version 5.8

.SH MB-SYSTEM AUTHORSHIP
David W. Caress
.br
  Monterey Bay Aquarium Research Institute
.br
Christian do Santos Ferreira
.br
  Center for Marine Environmental Sciences (MARUM)
.br
  University of Bremen
.br
Dale N. Chayes
.br
  Center for Coastal and Ocean Mapping
.br
  University of New Hampshire
.br

.SH INTRODUCTION
\fBMB-System\fP is an open source software package for the processing and 
display of seafloor mapping data, particularly bathymetry and backscatter 
imagery data derived from multibeam, interferometry, and sidescan sonars. 
\fBMB-System\fP is freely available for download as source code that can be  
built and installed on Linux and OS-X computers. Documentation, tutorials, 
and FAQ are provided in this website. The \fBMB-System\fP discussion email 
lists allows users to engage with \fBMB-System\fP developers and other 
users from around the world.

\fBMB-System\fP was originally developed in 1993 at the Lamont-Doherty Earth 
Observatory (L-DEO) of Columbia University by David W. Caress and Dale N. 
Chayes with support from the Marine Geology and Geophysics program of the 
U.S. National Science Foundation (NSF).

\fBMB-System\fP is now a collaborative effort between the Monterey Bay 
Aquarium Research Institute (MBARI), the Center of Marine Environmental 
Science (MARUM) at Universität Bremen, and the Center for Coastal and 
Ocean Mapping (CCOM) at the University of New Hampshire. The David and 
Lucile Packard Foundation has provided the primary support for 
\fBMB-System\fP through MBARI since 1998. NSF supported \fBMB-System\fP 
development from its inception in 1993 through 2018.

.SH WEBSITE AND SOURCE CODE REPOSITORY
The website for \fBMB-System\fP is hosted by MBARI, and serves as the primary
source of information about this project and software:
.br
     https://www.mbari.org/technology/mb-system/

.SH SOURCE CODE REPOSITORY
The source code repository for \fBMB-System\fP is at:
.br
     https://github.com/dwcaress/MB-System

.SH COPYRIGHT

\fBMB-System\fP Copyright (C) 1993-2024 by

David W. Caress (caress@mbari.org)
.br
Monterey Bay Aquarium Research Institute
.br
Moss Landing, California, USA

Dale N. Chayes
.br
Center for Coastal and Ocean Mapping
.br
University of New Hampshire
.br
Durham, New Hampshire, USA

Christian dos Santos Ferreira
.br
Zentrum für Marine Umweltwissenschaften (MARUM)  |  Center of Marine Environmental Science (MARUM)
.br
Universität Bremen                               |  University of Bremen
.br
Bremen, Deutschland                              |  Bremen, Germany

.SH LICENSING
The MB-System source code is distributed under the GNU General Public License, version 3, as formulated by the GNU Project. Early MB-System distributions were described as "public domain", which meant there was no restriction whatsoever on the use of the code. For over a decade we have adopted the more restrictive GNU GPL license in order to insure that anyone who distributes software based in whole or in part on MB-System also distributes their modified MB-System source code and any additional source code.

The file "GPL.md", located at the top of the MB-System source code distribution directory structure, contains the text of the GNU GPL version 3. This text and associated explanations are available at the GNU Project website https://www.gnu.org/licenses/gpl-3.0.en.html

The MB-System distribution includes some source code derived from packages that are distributed separately and have been authored by programmers other than the MB-System team. This includes:

The Generic Sensor Format (GSF) library source located in mbsystem/src/gsf
.br
The GSF package is maintained and distributed by Leidos Corporation under contract to the United States Naval Oceanographic Office. The current source code can downloaded from https://www.leidos.com/products/ocean-marine and is licensed using the LGPLv2.1 open source license.

The SURF API (SAPI) library source located in mbsystem/src/surf
The SAPI package was released under the GNU General Public License by Atlas Hydrographic in 2001; Atlas Hydrographic has since been acquired by Teledyne Marine Technologies Inc.

The MR1PR library source located in mbsystem/src/mr1pr
This package was primarily developed by Roger Davis of the Hawaii Mapping Research Group (HMRG) at the University of Hawaii. The MR1PR source code was released without restriction by HMRG in 2000. This code is licensed as part of MB-System under the GNU General Public License (version 3).

The mb_beaudoin() function found in mbsystem/src/mbio/mb_angle.c
This important function that calculates beam angles for multibeam sonars was contributed by Jonathan Beaudoin of CCOM/JHC University of New Hampshire and John Hughes Clarke of the Ocean Mapping Group, University of New Brunswick. This code is licensed as part of MB-System under the GNU General Public License (version 3).

The mb_mergesort() function found in mbsystem/src/mbio/mb_esf.c
This implementation of the merge sorting algorithm derives from the GNU-Darwin Distribution. This code is released under both the Apple Public Source License Version 1.1 and the BSD license, with original copyright by the Regents of the University of California.

The Terrain Relative Navigation (TRN) algorithm and related software
The TRN software included in MB-System derives from software developed by Steve Rock of Stanford University, many of Steve Rock's graduate students from 2000 through 2020, and Rob McEwen, Rich Henthorn, and Kent Headley of MBARI. The integration of TRN into MB-System was doen by Kent Headley and David Caress, and the relevant source files are found in mbsystem/src/mbtrn, mbsystem/src/mbtrnav, mbsystem/src/mbtrnframe, and mbsystem/src/mbtrnutils. This code is licensed as part of MB-System under the GNU General Public License (version 3).

.SH CAVEAT
The MB-System source code and any associated documentation does not come with any warranties, nor is it guaranteed to work on your computer or to do anything useful. The user assumes full responsibility for the use of this system. In particular, David W. Caress, the Monterey Bay Aquarium Research Institute, the Lamont-Doherty Earth Observatory of Columbia University, or any other individuals or organizations involved in the design and maintenance of the MB-System software package are NOT responsible for any damage that may follow from correct or incorrect use of these programs.

.SH SEE ALSO
\fBMB-System\fP consists of many programs, some of which are graphical tools. The following libraries, programs and macros have separate manual pages:

\fBmbsystem\fP(1): This manual page for the \fBMB-System\fP software package.
.br
\fBmbio\fP(3): The \fBMB-System\fP input-output (i/o) library supporting many seafloor mapping data formats.

Compiled programs:

\fBmbabsorption\fP(1): Calculates water sound absorption as a function of water properties.
.br
\fBmbareaclean\fP(1): Identifies and flags bad beams in swath sonar bathymetry data within a specified area.
.br
\fBmbauvloglist\fP(1): Generate arbitrary text lists of values from MBARI AUV mission log files.
.br
\fBmbauvnavusbl\fP(1): Merge inertial and surface tracking navigation for submerged sonar platforms (e.g. ROVs and AUVs).
.br
\fBmbbackangle\fP(1): Generates corrections for sidescan and/or amplitude data by calculating average amplitudes as a function of the seafloor grazing angle.
.br
\fBmbclean\fP(1): Identifies and flags bad beams in swath sonar bathymetry data.
.br
\fBmbconfig\fP(1): Provides command line access to the MB-System version and to the locations of the levitus database and the OTPS tidal correction software.
.br
\fBmbcopy\fP(1): Copy swath sonar data files.
.br
\fBmbctdlist\fP(1): List CTD data in swath sonar data files.
.br
\fBmbdatalist\fP(1): Parses recursive datalist files and outputs the complete list of data files and formats.
.br
\fBmbdefaults\fP(1): Set or list default mbio parameters for reading and writing swath sonar data
.br
\fBmbdumpesf\fP(1): mbdumpesf reads an MB-System edit save file and dumps the contents as an ascii table to stdout.
.br
\fBmbedit\fP(1): Interactive editor used to flag bad beams in swath sonar bathymetry data.
.br
\fBmbeditviz\fP(1): Interactive 3D visualization bathymetry editing and attitude bias patch test.
.br
\fBmbextractsegy\fP(1): Extract subbottom profiler or center beam reflection data to segy files.
.br
\fBmbfilter\fP(1): Apply one or more simple filters to sidescan and/or beam amplitude data.
.br
\fBmbformat\fP(1): List information about swath sonar data formats supported by the MBIO library.
.br
\fBmbgetesf\fP(1): Extract bathymetry edits in edit save file format.
.br
\fBmbgpstide\fP(1): Generate tide files from the height above ellipsoid data in the 'h' datagrams of Kongsberg multibeam data files
.br
\fBmbgrdviz\fP(1): Vizualize GMT grids.
.br
\fBmbgrid\fP(1): Grid bathymetry, amplitude, and sidescan data from swath sonar data files.
.br
\fBmbhistogram\fP(1): Obtain histogram of bathymetry, amplitude, or sidescan data from swath sonar data files.
.br
\fBmbinfo\fP(1): Output some basic statistics of swath sonar data files.
.br
\fBmblevitus\fP(1): Create a water velocity profile which is representative of the mean annual water column for a specified 1 degree by 1 degree region.
.br
\fBmblist\fP(1): List data in swath sonar data files.
.br
\fBmbmakeplatform\fP(1): Create or modify an MB-System platform file, which represents a survey system as a set of sensors with positional and angular offsets.
.br
\fBmbmosaic\fP(1): Mosaic sidescan and amplitude data.
.br
\fBmbnavadjust\fP(1): Package that solves for optimal navigation by matching bathymetry of overlapping swathes.
.br
\fBmbnavadjustmerge\fP(1): Merge two mbnavadjust projects.
.br
\fBmbnavedit\fP(1): Interactive editor used to fix problems with navigation in swath sonar data files.
.br
\fBmbnavlist\fP(1): List navigation data in swath sonar data files.
.br
\fBmbotps\fP(1): Generate open ocean tidal model for specified time and location using the Oregon State Tidal Prediction Software (OTPS) package.
.br
\fBmbpreprocess\fP(1): Perform preprocessing of the logged data comprising a survey, including applying lever arm corrections (if necessary) and setting up the MB-System processing environment.
.br
\fBmbprocess\fP(1): Process swath sonar data files, including merging navigation, applying bathymetry edits, recalculating bathymetry by raytracing, and applying a variety of other corrections.
.br
\fBmbrollbias\fP(1): Evaluate the roll bias of a swath sonar system using two pieces of coincident bathymetry data collected with opposing ship headings.
.br
\fBmbrolltimelag\fP(1): Estimate attitude time lag by cross correlation of apparent bottom slope with the roll time series:
.br
\fBmbroutetime\fP(1): Outputs a list of the times when a survey passes the waypoints of a planned survey route.
.br
\fBmbsegygrid\fP(1): Generate time vs. trace number grids of seismic data from segy files.
.br
\fBmbsegyinfo\fP(1): Output some basic statistics of segy seismic data files.
.br
\fBmbsegylist\fP(1): List selected header values in segy seismic data files.
.br
\fBmbsegypsd\fP(1): Calculates the power spectral density function of each trace in a segy data file, outputting the results as a GMT grid file..
.br
\fBmbset\fP(1): Create and modify parameter files used to control mbprocess.
.br
\fBmbsslayout\fP(1): Translate time-based sidescan sonar data into backscatter laid out into a regular array of pixels on the seafloor by projecting onto a topographic model.
.br
\fBmbstripnan\fP(1): Filter to remove NaN nodes.
.br
\fBmbsvplist\fP(1): Extract water sound velocity profiles (SVPs) from swath data files.
.br
\fBmbsvpselect\fP(1): Select the best available sound speed model for each swath file in a survey according to user specified criteria.
.br
\fBmbtime\fP(1): Converts between calendar time and unix time.
.br
\fBmbvelocitytool\fP(1): Interactive program for modeling the affect of the water velocity profile on swath sonar bathymetry calculations.
.br
\fBmbvoxelclean\fP(1): mbvoxelclean identifies and flags artifacts in swath bathymetry data using a 3D density filter. .

Alphabetical List of GMT Modules:
.br
MB-system also includes four plug-in modules for the GMT software package that are built as a shared library that can be called by GMT.

.br
\fBmbcontour\fP(1): GMT plug-in that generates GMT Postscript color contour plots of swath bathymetry.
.br
\fBmbgrdtiff\fP(1): GMT plug-in that generates a GeoTIFF image from gridded data.
.br
\fBmbswath\fP(1): GMT plug-in that generates GMT compatible Postscript color and color shaded relief plots of swath bathymetry and backscatter data.
.br
\fBmbgrd2obj\fP(1): GMT plug-in that translates a topography grid to an OBJ format 3D model file for visualization and 3D printing

Alphabetical List of Macros:
.br
Macros are executable shellscripts which make use of programs from the MB-System and other software packages to accomplish common tasks easily. Some are written in Perl and others in Python3.

\fBmbm_arc2grd\fP(1): Convert an ArcView ASCII grid file to a GMT grid file.
.br
\fBmbm_copy\fP(1): Translate groups of swath data files between formats
.br
\fBmbm_bpr\fP(1): Process data from a Seabird SBE53 pressure sensor into a tidal model for use by mbprocess.
.br
\fBmbm_fmtvel\fP(1): Scans a Hydrosweep swath sonar data file using the program mbhsdump and generates a list in columnar format with time, date, latitude, longitude, C-mean, and C-keel entrys.
.br
\fBmbm_grd2arc\fP(1): Convert a GMT grid file to an ArcView ASCII grid file.
.br
\fBmbm_grd3dplot\fP(1): Reads a GMT GRD grid file and writes a shellscript which will generate a GMT 3D perspective view of the data.
.br
\fBmbm_grdcut\fP(1): Extract a subarea of a GMT grid file.
.br
\fBmbm_grdinfo\fP(1): Get information regarding a GMT grd file when the region of interest is a subset of the area covered in the input file.
.br
\fBmbm_grdplot\fP(1): Reads a GMT GRD grid file and writes a shellscript which will generate a GMT map of the data.
.br
\fBmbm_grdtiff\fP(1): Reads a GMT GRD grid file and writes a shellscript which will generate a TIFF image of the data.
.br
\fBmbm_histplot\fP(1): Create an executable shellscript which will generate a GMT histogram plot of a dataset.
.br
\fBmbm_makesvp\fP(1): Generate a sound velocity profile model from sound speed and depth values in swath files.
.br
\fBmbm_multicopy\fP(1): Translate groups of swath data files between formats using parallel processes.
.br
\fBmbm_multidatalist\fP(1): Generates ancillary files used in data management using parallel processes.
.br
\fBmbm_multiprocess\fP(1): Apply specified processing tasks to a swath data file using parallel processes.
.br
\fBmbm_plot\fP(1): Reads a swath sonar data file and writes a shellscript which will generate a swath and/or contour plot of the data.
.br
\fBmbm_route2mission\fP(1): Translate an mbgrdviz survey route file into an MBARI AUV mission script.
.br
\fBmbm_stat\fP(1): Runs mbinfo on a swath sonar data file and extracts beam statistics from the output of mbinfo.
.br
\fBmbm_utm\fP(1): Performs forward and inverse UTM projections of ASCII data triples.
.br
\fBmbm_xbt\fP(1): Processes a Sparton XBT data file and outputs a sound velocity profile file which can be used to process swath sonar data.
.br
\fBmbm_xyplot\fP(1): Reads one or more xy data files and writes a shellscript which will generate GMT plot of the data.

Deprecated Programs and Macros: 
.br
These are programs and macros that are no longer used, and are not built by default when MB-System is installed. If required, these can be built and installed with a special argument to the CMake build system.

\fBmbhsdump\fP(1): List raw information contained in Hydrosweep DS data files (formats 21 and 24).
.br
\fBmbhysweeppreprocess\fP(1): Preprocess Hysweep HSX data (format 201), including applying time lag and biases to attitude and navigation data.
.br
\fBmbkongsbergpreprocess\fP(1): performs preprocessing of data from third generation Kongsberg multibeam sonars (e.g. EM122, EM302, EM710).
.br
\fBmbneptune2esf\fP(1): Extract bathymetry edits from Simrad Neptune software into edit save file format.
.br
\fBmbps\fP(1): Simple perspective views of swath bathymetry in Postscript.
.br
\fBmbswplspreprocess\fP(1): Preprocess SwathPlus SXP data (format 222), including applying time lag and biases to attitude and navigation data.
.br
\fBmb7k2jstar\fP(1): Extract Jstar format (format 132) sidescan and subbottom data from Reson 7k (format 88) data files.
.br
\fBmb7k2ss\fP(1): mb7k2ss extracts Edgetech sidescan sonar data from Reson 7k format data, bins and lays the sidescan onto the seafloor, and outputs files in the MBF_MBLDEOIH formst (MBIO format id 71).
.br
\fBmb7kpreprocess\fP(1): Preprocess Reson 7k data (format 88), including applying time lag and biases to attitude and navigation data.
.br
\fBmbm_grd2geovrml\fP(1): Create and execute commands which generate a TerraVision tileset and GeoVRML set of files that can be combined with other data and viewed in a web browser.
.br
\fBmbm_grid\fP(1): Reads a swath sonar data file and writes a shellscript which will grid bathymetry data or mosaic sidescan (or amplitude) data using reasonable guesses at the appropriate grid bounds and bin size.

.SH BUGS
It doesn't do everything we want it to yet, it doesn't work with
every kind of seafloor mapping data ever collected, and sometimes it
breaks.
